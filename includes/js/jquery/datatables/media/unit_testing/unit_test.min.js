var oTest={bBlock:false,iReTestLimit:20,iReTestDelay:150,bEnd:false,_aoQueue:[],_iReTest:0,_bFinished:false,"fnTest":function(sMessage,fnSetup,fnTest)
{this._aoQueue.push({"sMessage":sMessage,"fnSetup":fnSetup,"fnTest":fnTest,"bPoll":false});this._fnNext();},"fnWaitTest":function(sMessage,fnSetup,fnTest)
{this._aoQueue.push({"sMessage":sMessage,"fnSetup":fnSetup,"fnTest":fnTest,"bPoll":true});this._fnNext();},"fnStart":function(sMessage)
{window.parent.controller.fnStartMessage(sMessage);},"fnComplete":function()
{this._bFinished=true;this._fnNext();},"fnCookieDestroy":function(oTable)
{var sName=oTable.fnSettings().sCookiePrefix+oTable.fnSettings().sInstance;var aParts=window.location.pathname.split('/');var sNameFile=sName+'_'+aParts.pop().replace(/[\/:]/g,"").toLowerCase();document.cookie=sNameFile+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+
aParts.join('/')+"/";},"_fnReTest":function(oTestInfo)
{var bResult=oTestInfo.fnTest();if(bResult)
{this._fnResult(true);this._fnNext();}
else
{if(this._iReTest<this.iReTestLimit)
{this._iReTest++;setTimeout(function(){oTest._fnReTest(oTestInfo);},this.iReTestDelay);}
else
{this._fnResult(false);}}},"_fnNext":function()
{if(this.bEnd)
{return;}
if(!this.bBlock&&this._aoQueue.length>0)
{var oNextTest=this._aoQueue.shift();window.parent.controller.fnTestStart(oNextTest.sMessage);this.bBlock=true;if(typeof oNextTest.fnSetup=='function')
{oNextTest.fnSetup();}
var bResult=oNextTest.fnTest();if(oNextTest.bPoll)
{if(bResult)
{this._fnResult(true);this._fnNext();}
else
{_iReTest=0;setTimeout(function(){oTest._fnReTest(oNextTest);},this.iReTestDelay);}}
else
{this._fnResult(bResult);this._fnNext();}}
else if(!this.bBlock&&this._aoQueue.length==0&&this._bFinished)
{window.parent.controller.fnUnitComplete();}},"_fnResult":function(b)
{window.parent.controller.fnTestResult(b);this.bBlock=false;if(!b)
{this.bEnd=true;}}};var oDispacher={"click":function(nNode,oSpecial)
{var evt=this.fnCreateEvent('click',nNode,oSpecial);if(nNode.dispatchEvent)
nNode.dispatchEvent(evt);else
nNode.fireEvent('onclick',evt);},"change":function(nNode)
{var evt=this.fnCreateEvent('change',nNode);if(nNode.dispatchEvent)
nNode.dispatchEvent(evt);else
nNode.fireEvent('onchange',evt);},fnCreateEvent:function(sType,nTarget,oSpecial)
{var evt=null;var oTargetPos=this._fnGetPos(nTarget);var sTypeGroup=this._fnEventTypeGroup(sType);if(typeof oSpecial=='undefined')
{oSpecial={};}
var ctrlKey=false;var altKey=false;var shiftKey=(typeof oSpecial.shift!='undefined')?oSpecial.shift:false;var metaKey=false;var button=false;if(document.createEvent)
{switch(sTypeGroup)
{case'mouse':evt=document.createEvent("MouseEvents");evt.initMouseEvent(sType,true,true,window,0,oTargetPos[0],oTargetPos[1],oTargetPos[0],oTargetPos[1],ctrlKey,altKey,shiftKey,metaKey,button,null);break;case'html':evt=document.createEvent("HTMLEvents");evt.initEvent(sType,true,true);break;case'ui':evt=document.createEvent("UIEvents");evt.initUIEvent(sType,true,true,window,0);break;default:break;}}
else if(document.createEventObject)
{switch(sTypeGroup)
{case'mouse':evt=document.createEventObject();evt.screenX=oTargetPos[0];evt.screenX=oTargetPos[1];evt.clientX=oTargetPos[0];evt.clientY=oTargetPos[1];evt.ctrlKey=ctrlKey;evt.altKey=altKey;evt.shiftKey=shiftKey;evt.metaKey=metaKey;evt.button=button;evt.relatedTarget=null;break;case'html':case'ui':evt=document.createEventObject();break;default:break;}}
return evt;},_fnGetPos:function(obj)
{var curleft=0;var curtop=0;if(obj.offsetParent)
{curleft=obj.offsetLeft;curtop=obj.offsetTop;while(obj=obj.offsetParent)
{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}}
return[curleft,curtop];},_fnEventTypeGroup:function(sType)
{switch(sType)
{case'click':case'dblclick':case'mousedown':case'mousemove':case'mouseout':case'mouseover':case'mouseup':return'mouse';case'change':case'focus':case'blur':case'select':case'submit':return'html';case'keydown':case'keypress':case'keyup':case'load':case'unload':return'ui';default:return'custom';}}}
var oSession={nTable:null,fnCache:function()
{this.nTable=document.getElementById('demo').cloneNode(true);},fnRestore:function()
{while($.fn.dataTableSettings.length>0)
{try{$.fn.dataTableSettings[0].oInstance.fnDestroy();}catch(e){$.fn.dataTableSettings.splice(0,1);}}
var nDemo=document.getElementById('demo');nDemo.innerHTML="";for(var i=0,iLen=this.nTable.childNodes.length;i<iLen;i++)
{nDemo.appendChild(this.nTable.childNodes[0]);}
this.fnCache();}}
$(document).ready(function(){oSession.fnCache();});